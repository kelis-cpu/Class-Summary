# 第一章 网络安全基础  
## 1.1 网络空间安全威胁及态势  
### 1.1.1 网络安全威胁及现状分析
1.法律法规、安全管理和意识欠缺  
2.网络安全规范和标准不统一  
3.政府和企业的侧重点及要求不一致  
4.网络系统的安全威胁及隐患  
5.网络技术和手段滞后  
6.网络安全威胁新变化，黑客利益产业链惊人  
### 1.1.2 网络安全威胁的种类和途径  
1.种类  
非授权访问、窃听、篡改、伪造、截获/修改、病毒木马、行为否认、拒绝服务攻击、人为疏忽、物理破坏、旁路控制(利用系统的缺陷和安全脆弱性的非正常控制)、服务欺骗、信息重发、陷阱门等.  
2.途径  
a.光盘及其他存储介质  
b.网络系统  
Web浏览、即时通信、下载软件、OS、DBMS、其他网络服务  
c.其他途径  
### 1.1.3 网络安全威胁及风险分析  
1.网络系统安全威胁及风险  
a.网络系统面临的威胁和风险(7个方面)  
网络开放性隐患增多、网络共享风险大、系统结构复杂有漏洞、身份认证难、边界难确定、传输路径与结点隐患多、信息高度聚集  
b.网络服务协议的安全威胁  
TCP/IP、FTP、E-mail、RPC和NFS等不仅公开，且存在安全漏洞，此外，网络管理人员无足够事件和精力专注于全程网络安全监控，且OS的复杂性.  
2.OS的漏洞及隐患  
体系结构和研发漏洞、创建进程的隐患、服务及设置的风险、配置和初始化错误  
3.防火墙的局限性及风险  
防火墙能够阻止外网基于IP包头的攻击和非信任地址的访问，却无法阻止基于数据内容的黑客攻击和病毒入侵，也无法控制内网之间的攻击行为.其安全性还需要入侵检测系统、入侵防御系统、统一威胁管理等技术弥补.  
4.网络数据库的安全风险  
不安全因素包括:非法窃取用户信息资源、授权用户超出权限进行数据访问、更改和破坏等.确保数据的安全性、完整性和并发控制.  
## 1.2 网络安全的概念和内容  
### 1.2.1 网络安全的相关概念、目标和特征  
1.信息安全相关概念  
信息安全是指系统的硬件、软件及其信息受到保护，并持续正常地运行和服务。**信息安全的五大特征：保密性、完整性、可用性、可控性、可审查性**  
2.网络安全与网络空间安全的概念  
网络安全是指利用网络技术、管理和控制等措施，保证网络系统和信息的保密性、完整性、可用性、可控性和可审查性。  
网络空间安全是指研究网络空间中的信息在产生、传输、存储和处理环节中所面临的威胁和防御措施，以及网络和系统本身的威胁和防护措施，以及网络和系统本身的威胁和防护机制。  
**网络安全两大方面：网络系统的安全、网络信息(数据)的安全--网络安全的最终目标和关键**  
### 1.2.2 网络安全的内容及侧重点  
1.网络安全涉及的内容  
网络安全的内容包括：OS安全、数据库安全、网络站点安全、病毒与防护、访问控制、加密与鉴别  
按层次划分包括:实体安全、系统安全、运行安全、应用安全、管理安全  
## 1.3 网络安全技术概述  
### 1.3.1 网络安全技术的概念和通用技术  
1.网络安全技术  
主要包括：实体安全技术、网络系统安全技术、数据安全、密码及加密技术、身份认证、访问控制、防恶意代码、检测防御、管理与运行安全技术  
2.通用的网络安全技术  
**三大类(8种)**：预防保护类(身份认证、访问管理、加密、防恶意代码、加固)、检测跟踪类(监控、审核跟踪)、响应恢复类(备份恢复)  
3.网络空间安全新技术  
a)智能移动终端恶意代码检测技术
b)可穿戴设备安全防护技术  
生物特征识别技术、入侵检测与病毒防御工具  
c)云存储安全技术  
云容灾技术、可搜索加密与数据完整性校验技术、基于属性的加密技术  
d)后量子密码  
### 1.3.2 网络安全常用模型  
1.PDRR模型--防护、检测、响应、恢复  
2.网络安全通用模型、网络访问安全模型、网络安全防御模型  
# 第二章 网络安全技术基础  
## 2.1 网络协议安全概述  
1.网络协议的安全风险  
a.网络协议自身的设计缺陷和实现中存在的一些安全漏洞，容易受到不法者的侵入和攻击.  
b.网络协议没有有效的认证机制和验证通信双方真实性的功能.  
c.网络协议缺乏保密机制，没有保护网上数据机密性的功能.  
### 2.1.2 TCP/IP层次安全性  
1.网际接口层  
防止设备被盗、意外故障、设备损坏与老化、信息探测与窃听(以太网上采用广播方式)--相邻结点间的认证、子网划分、VLAN\物理隔绝、点对点加密、MAC、MDC  
2.网络层  
ipv4设计之初未考虑安全问题，ip包不具有任何安全特性，IP欺骗和ICMP攻击--伪造IP包地址、拦截、窃听、篡改和重播.ipv6简化了ipv4的ip头结构，增加了对安全性的设计.--数据源认证、包过滤防火墙、VPN  
3.传输层  
安全套接层协议SSL，现更名为传输层协议TLS，包括SSL握手协议和SSL记录协议两个协议。SSL握手协议用于数据认证和数据加密的过程，利用多种有效密钥交换算法和机制。SSL记录协议对应用程序提供的信息进行分段、压缩、认证和加密.SSL协议提供了身份验证、完整性校验和保密性服务。--电路级防火  
4.应用层  
主要体现在常用的应用协议上，--用户身份认证、CA  
a.HTTP安全  
使用80端口建立连接，并进行应用程序浏览、数据传输和对外服务，一旦下载了具有破坏性的Active X和Java Applets插件，这些程序会在用户端运行  
b.FTP安全  
c.SMTP安全  
通过SMTP对E-mail服务器发送大量的垃圾邮件和聚集数据包，导致拒绝服务，而且目前多数病毒通过邮件或其附件进行传播。SMTP服务器应增加过滤、扫描及设置拒绝指定邮箱等功能  
d.DNS安全  
DNS解析域名使用其53端口，在进行区域传输时使用TCP53端口，黑客可进行区域传输或利用攻击DNS服务器窃取区域文件，并从中窃取区域中所有系统的IP地址和主机名。可采用防火墙，还可以通过配置系统限制接受特定主机的区域传输  
e.Telnet安全  
允许远程用户登录是产生Telnet安全问题的主要原因，另外Telnet还以明文方式发送所有用户名和密码.  
### 2.1.3 IPv6的安全性概述  
1.ipv6的优势及特点  
a.扩展地址空间及应用  
ipv6不仅扩展了地址空间，还解决了其他ipv4问题，如安全性、端到端IP连接、服务质量、多播、移动性和即插即用等功效.  
b.提高网络的整体性能  
ipv6的数据包可超过64kb,使应用程序可以利用最大传输单元获得更快、更可靠的数据传输，简化了包头结构，使路由器加快数据包处理速度.  
c.加强网络的安全性能  
ipv6以内嵌安全机制要求强制实现IP安全协议IPSec，提供支持数据源发认证、完整性和保密性的能力，同时可抗重放攻击。主要靠两个报头实现:认证头AH，封装安全载荷ESP.  
d.提供更好的服务质量、实现更好的组播功能、支持即插即用和移动性、提供必选的资源预留协议  
2.ipv4与ipv6安全问题比较  
1).与Ipv4原理和特征未发生变化的安全问题  
a.网络层以上的问题，各种应用层的攻击  
b.网络层数据保密性和完整性的相关问题:主要是窃听和中间人攻击，由于IPSec未解决大规模密钥分配和管理的难点，缺乏广泛的部署.  
c.网络层可用性相关安全性问题:网络系统的洪泛攻击.  
2).发生明显变化的安全问题  
a.侦测  
ipv6的默认子网空间264位比ipv4安全很多.  
b.非授权访问  
访问控制同ipv4类似，依赖防火墙或路由器访问控制表ACL;NAT和IPSec功能不匹配，在IPv6下很难穿越地址转换型防火墙以IPSec通信。对于包过滤型防火墙，若采用ESP，由于3层以上的信息不可见，更难控制.  
c.篡改分组头部和分段信息  
IPv6网路中的中间设别不再分片，由于多个ipv6扩展头的存在，防火墙很难计算有效数据包的最小尺寸，此时传输层协议报头有可能不在第一个分片分组内，从而使网络监控设备若不对分片进行重组，将无法实施基于端口信息的访问控制策略。  
d.伪造源地址  
ipv6网络中，由于地址汇聚，过滤方法实现更加简单且负载更小；转换网络地址少，易追踪。  
3.ipv6安全机制  
1)协议安全  
全面支持认证头AH认证和封装安全有效载荷ESP扩展头，支持数据源发认证、完整性和抗重放攻击.  
2)网络安全  
a.实现端到端安全  
在两端主机上对报文IPSec进行封装，中间路由器实现对有IPSec扩展头的IPv6报文封装传输，可实现端到端安全.  
b.提供内网安全、由安全隧道构建安全VPN、以隧道嵌套实现网络安全  
4.移动IPv6面临的安全威胁  
主要威胁包括拒绝服务攻击、重放攻击、信息窃取等.  
可在注册消息中添加序列号以防范重放攻击，并在协议报文中引入时间随机数.  
## 2.2 VPN技术  
### 2.2.1 vpn的技术特点  
a.安全性高  
使用通信协议、身份验证和数据加密三方面技术保障通信的安全性.  
b.费用低廉、管理便利、灵活性强、服务质量佳  
### 2.2.2 vpn实现技术  
1.隧道技术  
vpn的核心技术，是一种隐式传输数据的方法，在隧道一端封装数据，通过隧道传输到另一端进行数据解封装.  
2.加解密技术  
非对称加密技术进行密钥协商和交换，对称加密技术进行数据加密  
3.密钥管理技术  
密钥分发采用手工配置和密钥交换协议动态分发两种方法--Diffie-Hellman算法通过网络传输密钥.  
4.身份认证技术  
在vpn实际应用中，身份认证技术包括信息认证--保障信息的完整性和通信双方的不可抵赖性、用户身份认证--鉴别用户身份的真实性.  
PKI体系:用于信息认证,通过CA，采用数字签名和哈希函数保障信息的可靠性和完整性，例如SSL VPN是利用KPI支持的ssl协议实现应用层的vpn安全通信。  
非PKI体系:用于用户身份认证，一般采用用户名+口令方式，vpn采用的6种非pki体系认证方式:密码认证协议、Shiva协议、询问握手协议(服务器端先给客户端发送一个随机码challenge，客户端根据challenge对自己掌握的口令、challenge和会话ID调用MD5函数进行哈希散列，然后将此结果发送给服务器，服务器再从数据库中取出password2，并同样处理，最后比较加密结果)、微软询问握手协议、微软询问握手协议第二版、扩展身份认证协议.  
vpn的实际应用：远程访问虚拟网、企业内部虚拟网、企业扩展虚拟网  
## 2.3 无线网络安全技术  
1.无线网络的安全风险  
两方面：访问控制、数据加密  
802.11协议本身存在漏洞，黑客可进行中间人攻击、Dos攻击和封包破解攻击，也可以盗取机密信息  
2.无线网络AP及路由安全  
1)无限接入点AP安全  
a.修改admin密码  
b.WEP加密传输--防止数据被恶意篡改和伪造、用WEP算法对数据进行加密，防止数据被黑客窃听、利用接入控制，防止未授权用户对其网络进行访问.  
c.禁用DHCP服务  
开启DHCP，黑客可自动获取IP地址接入无线网，若禁用此功能，黑客只能猜测破译IP地址、子网掩码和默认网关等.  
d.修改SNMP字符串  
若确实需要SNMP进行远程管理，则需修改公开及专用的公用字符串。否则，黑客可能利用SNMP获得有关的重要信息,借助SNMP漏洞进行攻击破坏.  
e.禁止远程管理  
对于规模较小的网络，应直接登陆到无线AP进行管理，无需开启AP的远程管理功能.  
f.修改SSID标识  
同一厂商的产品都使用相同的SSID名，可利用SSID，在初始化状态下检验登录无线网络结点的连接请求，只要检验通过即可连接到无线网络.  
g.禁止SSID广播  
可使非授权客户端无法通过广播获得SSID.  
h.过滤MAC地址、合理放置无线AP  
i.WPA认证  
WPA利用一种暂时密钥完整协议TKIP处理WEP所不能解决的各设备共用一个密钥的安全问题。WPA使用的密钥与网络上各设备的MAC地址及一个更大的初始化向量合并，确保各结点均使用一个不同密钥流对数据进行加密，之后TKIP采用RC4加密算法加密数据.  
2.无线路由器安全  
利用网络防火墙、IP地址过滤  
3.IEEE 802.1x 身份认证  
认证过程:  
无线客户端向AP发送请求，尝试与AP进行通信-->AP将加密数据发送给验证服务器进行用户身份认证-->验证服务器确认用户身份后，AP允许该用户接入-->建立网络连接后授权用户通过AP访问网络资源.  
# 第四章  黑客攻防与检测防御  
## 4.1 黑客攻击的主要途径  
1.黑客攻击的漏洞  
计算机网络协议本身的缺陷、软件设计本身的缺陷/BUG、系统配置不当、系统安全管理中的问题  
2.黑客入侵通道--端口  
3.社会工程学--三分技术，七分管理  
## 4.2 黑客攻击的目的及过程  
1.黑客攻击手段的种类  
网络监听、拒绝服务攻击、欺骗攻击(源IP地址欺骗、源路由欺骗)、缓冲区溢出、病毒及密码攻击、应用层攻击  
2.攻击过程  
隐藏IP(利用肉鸡或做多级跳板“Sock代理”)-->踩点扫描-->获得控制权-->种植后门-->隐身退出  
## 4.3 常用的攻防技术  
一.端口扫描  
1.扫描方式  
a.手工命令行--ping、tracert、finger  
b.端口扫描工具--TCP connect扫描(connect()是一种系统调用，不需要任何特权，端口在监听，则返回成功)、TCP SYN扫描(TCP SYN是建立连接时使用的握手信号，发送一个SYN数据包，然后等待响应，SYN/ACK响应表明该端口正在被监听，RST响应表明该端口没有被监听，而且极少有主机记录这种连接请求.)  
2.常用端口扫描攻击  
秘密扫描、SOCKS端口扫描、跳跃扫描、UDP扫描  
3，防范  
定向关闭指定服务的端口、只开放允许端口  
二.网络监听  
1.网络监听的检测  
a.linux--检查网卡是否处于混杂模式  
b.windows--执行“C:\Windows\Drwatons.exe”检查是否有嗅探程序在运行  
2.预防手段  
VLAN技术、加密技术  
三.密码破解  
1.攻击方法  
通过网络监听非法窃取密码、强行破解用户密码、密码分析攻击(唯密文攻击、已知明文攻击、选择明文攻击、选择密文攻击)、放置木马程序、利用Web页面欺骗  
四.特洛伊木马  
1.攻击过程  
主要利用邮件附件、下载软件等先设法将木马程序放到被攻击者的计算机系统里，然后提示故意误导被攻击者打开可执行文件，也可以通过Script、ActiveX及ASP.CGI交互脚本的方式植入.  
五.缓冲区溢出  
1.缓冲区溢出攻击是指通过缓冲区写入超出其长度的大量文件或信息内容，造成缓冲区溢出，破坏程序的堆栈，使程序转而执行其他指令或使攻击者篡改程序运行的控制权.  
2.防范方法  
提高软件编写者的能力，强制编写正确代码、利用编译器的边界检查来实现缓冲区保护、程序指针完整性检查.  
六.拒绝服务  
常见的拒绝服务攻击:  
1.Flooding攻击  
发送大量的看似合法的TCP、UDP、ICMP包至目标主机  
2.SYN Flood攻击  
黑客发送虚假的包欺骗服务器，使服务器必须开启自己的监听端口不断等待.  
3.LAND attack  
攻击包中源地址和目的地址都是攻击对象的IP.  
4.ICMP floods  
向设置不当的路由器发送广播信息占用系统资源的做法.  
5.Application level floods  
针对应用层，例如向IIS这样的网络服务程序提出无节制的资源申请来破坏正常的网络服务.  
防范手段:及时安装系统补丁、防火墙、追踪攻击包，及时联系ISP和相关应急组织.  
七.其他攻防技术  
钓鱼、电子邮件攻击、利用默认账号攻击、撞库攻击、APT  
## 4.5 入侵检测与防御系统  
### 4.5.1 入侵检测系统概念  
防火墙合理的补充，是指对入侵行为自动进行检测、监控和分析过程的软件与硬件 的组合系统，是一种自动监测信息系统内、外入侵事件的安全设备.  
### 4.5.2 入侵检测系统的功能及分类  
1.IDS的基本结构  
事件产生器--负责原始数据采集，并将采集到的原始数据转换为事件、  
事件分析器--接收事件信息，进行分析，判断是否为入侵行为或异常现象(常用分析方法:模式匹配--将收集到的信息与已感知的网络入侵和系统误用模式数据库进行比较、统计分析--当网络系统的检测观察值在正常范围之外时，可能存在入侵行为、完整性分析--关注某个文件或对象是否被更改)  
事件数据库--存放中间数据和最终数据、  
响应单元--根据警告信息做出反应等构成.  
2.IDS的主要功能  
a.对网络流量的跟踪与分析功能  
b.对已知攻击特征的识别功能  
c.对异常行为的分析、统计与响应功能  
d.具有特征库的在线升级功能  
e.数据文件的完整性校验功能  
f.自定义特征的响应功能  
g.系统漏洞的预报警功能  
### 4.5.3 常用入侵检测方法  
1.特征检测法  
特征检测是对已知的攻击或入侵的放肆做出确定性的描述，形成相应的事件模式，当被审计的事件与已知的入侵事件模式相匹配时，即报警。  
2.异常检测法  
假设是入侵者的活动异常于正常体的活动，根据这一理念建立主体正常活动的“活动简档”，在进行比较.--常用的入侵检测5种统计模型:操作模型，方差，多元模型，马尔可夫过程模型，时间序列分析  
### 4.5.4 入侵检测与防御系统  
1.入侵检测系统  
a.基于主机的入侵检测系统HIDS  
以系统日志、应用程序日志为数据源--误报率低、系统的复杂性也小得多  
缺点:HIDS需要安装在需保护的设备上，会降低应用系统的效率，安装HIDS后，将本不允许安全管理员有权利访问的服务器变成可访问的;假如服务器未配置日志功能，则必须重新配置.  
b.基于网络的入侵检测系统NIDS  
以网络的信息流未数据源--能够检测来自网络的攻击，检测到超过授权的非法访问、不需改变主机的配置、不会影响业务系统的性能.  
缺点:只检查直接连接的网段，处理加密的会话过程比较困难，安装多台NIDS成本高，NIDS为提高性能通常采用特征检测法，只能检测普通的攻击.  
c.分布式入侵检测系统DIDS，结合了HIDS和NIDS  
2.入侵防御系统IPS  
IDS无法满足需求，IPS能够监视网络或网络设备的网络资料传输行为，及时中断、调整或隔离一些不正常或是具有伤害性的网络资料传输行为.  
原理：利用多个IPS过滤器，当新的攻击手段被发现后，会创建一个新的过滤器，每种过滤器负责分析相应的数据包，通过检查的数据包可继续前进，包含恶意内容的数据包则被丢弃.  
**防火墙部署在路由器之内**  
**3.防火墙、IDS、IPS的区别**  
部署位置:入侵检测系统：网络内部，监控整个子网、入侵防御系统:网络边界，抵抗外来入侵，对内部攻击未能为力、防火墙：对流经的网络流量进行检查，拦截不符合安全策略的数据包.  
IDS大多数为被动防护，攻击实际发生之前无法预先发出警报  
IPS为主动防护，预先对入侵活动和攻击性网络流量进行拦截，即一个网络端口接收外来的流量，经检查确认不包含异常活动或可疑内容之后，再通过另外一个端口将它传送到内部系统中.  
# 第五章 密码与加密技术  
## 5.1 密码的破译方法  
1.穷举搜索密钥攻击  
2.密码分析  
a.唯密文攻击--只知道加密算法和几组密文  
b.已知明文攻击--知道加密算法、一段明文和对应的密文  
c.选择明文攻击--知道加密算法,设法让对手加密一段选定的明文，并获得加密后的密文--差别分析法--让对手加密一段相似却差别细微的明文，然后比较他们加密后的结果，从而获得加密密钥.  
d.选择密文攻击--一种攻击模型,密码分析者事先收集一定数量的密文，让这些密文通过被攻击的加密算法解密，通过未知的密钥得到解密后的明文.  
4种攻击类型的强度按序递增,如果一个密码系统能抵抗选择明文攻击，那么它就能抵抗唯密文攻击和已知明文攻击.  
## 5.2 密钥管理  
**DH:**<https://www.cnblogs.com/yungyu16/p/13332882.html>  
**中间人攻击:**<https://program-think.blogspot.com/2014/11/https-ssl-tls-2.html>  
数字签名步骤:--消息的完整性、不可抵赖性  
若A向B发送消息，创建数字签名的步骤如下:
a.A用SHA-1算法计算原消息的散列值  
b.A用自己的私钥对该散列值使用RSA算法得到签名，并将签名附在原消息后面.  
若B收到消息,对数字签名进行验证的步骤:  
a.将接收到的消息中的原消息及其数字签名分离出来  
b.利用SHA-1计算原消息的散列值  
c.使用A的公钥验证该散列值的数字签名,证明该数字签名的合法性.  
# 第六章 身份认证与访问控制  
## 6.1 常用的认证系统即认证方法  
1.固定口令认证  
隐患:网络数据流窃听、认证信息截取/重放、字典攻击、穷举尝试、社会工程攻击、垃圾搜寻、窥探密码  
2.一次性口令方式--在登入过程中加入不确定因素,使每次登入过程中传送的信息都不同  
一次性口令认证系统包括两部分:  
1)生成不确定因子  
a.口令序列方式  
口令为一个前后相关的单向序列,系统只记录第N个口令。用户以第N-1个口令登入时,系统调用单向算法得出第N个口令与所存储的第N个口令比较，可判断用户的合法性.由于N为有限值,用户登入N次后必须重新初始化口令序列.  
b.挑战/回答方式  
用户在登入时得到系统发送一个随机数,通过某种单向算法将口令和随机数混合后发送给系统,系统以同样的方法验算,即可验证用户身份.  
c.时间同步方式  
2)生成一次性口令  
利用不确定因子生成一次性口令,  
硬件卡或者软件  
3)单点登入系统  
主要用于大型的网络系统,管理简单、管理控制便捷、用户使用快捷、安全性高、合并异构网络  
## 6.2 访问控制技术  
访问控制的三个方面：认证、控制策略实现和安全审计  
3种访问控制模式：DAC--自主访问控制，由资源的所有者决定是否允许特定的人访问资源、MAC--常用于军队和政府机构、RBAC--基于角色的访问控制，操作权限定义在角色中.  
**单点登录的访问管理**  
根据登录的应用类型不同,可将SSO分为3种类型:  
1.对桌面资源的统一访问管理  
a.登录Windows后统一访问Microsoft应用资源，Windows系统本身就是一个SSO系统  
b.登录Windows操作系统之后访问其他应用资源.  
2.Web单点登录  
3.传统C/S结构应用的统一访问管理--采用Web前端作为前台.  
**访问控制安全策略的实现**  
基于身份的安全策略--实现方法:能力表、访问控制表、基于规则的安全策略、基于综合访问控制方式.  
# 第八章 防火墙  
## 8.1 防火墙基础  
传统的防火墙是基于访问控制列表ACL进行包过滤的,位于多个网络之间.  
缺点:无法防范不经由防火墙的攻击、被动安全策略执行设备、不能防止利用服务器系统漏洞进行的攻击、不能防止利用标准网络协议中的缺陷进行的攻击、不能防止自身的安全漏洞威胁、不能防止感染了病毒的软件或文件的传输、不具备实时监控的能力-功能与速度成反比.  
## 8.2 防火墙分类  
1.包过滤型--工作在网络层  
根据数据包头源地址、目的地址、端口号和协议类型等标志确定是否允许通过.  
2.应用代理型--工作在应用层  
## 8.3 用防火墙防止SYN Flood攻击  
除了直接使用以上两种防火墙来防御攻击外，还可以进行一些设置来达到目的.  
1.SYN网关  
防火墙收到客户端的SYN包时，直接转发给服务器；防火墙收到服务器的SYN/ACK包后，一方面将SYN/ACK包转发给客户端，一方面以客户端的名义给服务器端回送一个ACK包，完成一次三次握手协议。服务器在连接状态比在半连接状态能够承受更多.  
2.被动式网关  
设置防火墙的SYN请求超时参数，让它远小于服务器的超时期限。防火墙负责转发客户端发往服务器端的SYN包，服务器发往客户端的SYN/ACK包和客户端发往服务器的ACK包.这样如果客户端在防火墙计时器到期时还没有发送ACK包，防火墙将往服务器发送RST包，以使服务器从队列中删去该半连接.  
3.SYN中继  
防火墙在收到客户端的SYN包后，不向服务器转发而是记录该状态信息，然后主动给客户端回送SYN/ACK包.如果收到ACK包，表明正常访问，由防火墙向服务器发送SYN包，完成三次握手.